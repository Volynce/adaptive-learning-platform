\# Step-06: Alembic init и правила миграций (ручной режим)



\## Решения

1\) Миграции Alembic — единственный источник истины для DDL.

2\) Миграции пишутся строго вручную (запрещено использовать --autogenerate).

3\) Alembic использует DATABASE\_URL через Settings проекта (get\_settings()), что автоматически подхватывает .env.

4\) На данном этапе target\_metadata = None, так как модели ORM ещё не введены.

&nbsp;  Это сознательно предотвращает “ложную уверенность” в автогенерации.



\## Зачем

\- Зафиксировать управляемую эволюцию схемы БД и возможность отката по git.

\- Исключить ошибки автогенерации для сложных ограничений (partial unique, CHECK, составные FK).

\- Сделать одинаковую конфигурацию БД для приложения и миграций.



\## Критерий готовности

\- В репозитории есть alembic.ini и каталог migrations/.

\- poetry run alembic --version отрабатывает.

\- env.py получает DATABASE\_URL через get\_settings() (единый источник правды).



