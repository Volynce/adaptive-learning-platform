\# Step-22: Старт попытки level-exam (20 вопросов) + контроль входных условий



\## Что сделано

1\) Реализован запуск попытки level-exam:

\- проверка допуска (eligibility) перед созданием attempt

\- создание level\_exam\_attempts (attempt\_no автонумерация)

\- запись набора вопросов в level\_exam\_attempt\_questions (без дублей)

\- возврат клиенту вопросов и вариантов (API-first)



2\) Исправлена деградация при недостатке банка вопросов:

\- добавлен seed step-22-extra-questions.sql: доведение количества активных вопросов в каждом модуле до >= 8

\- добавлена обработка NotEnoughQuestions в API: возвращаем 412 (а не 500)



\## Почему так

\- Настройки экзамена (min/max на модуль) отражают домен и не должны подстраиваться под тестовый банк.

\- Банк вопросов обязан соответствовать минимальным требованиям генератора, иначе система не воспроизводима.



\## Критерий готовности

\- при eligible=true эндпоинт /exams/level/start создаёт попытку и возвращает total\_q=20

\- в БД: ровно 20 вопросов в attempt\_questions, без дублей

